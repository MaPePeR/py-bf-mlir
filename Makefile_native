# Keep intermediate files
.SECONDARY:

%.opt.mlir :: %.bf
	python -m py_mlir_bf_compiler_native $< -o $@ --target low_builtin

%.ll : %.opt.mlir
	mlir-translate --mlir-to-llvmir $< -o $@

%.s : %.ll
	llc $< -o $@

%.out : %.s
	clang -g $< -o $@